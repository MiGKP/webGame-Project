<app-navbar></app-navbar>

<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Admin Dashboard</h1>
    <p>Welcome! Here's an overview of your game store.</p>
  </div>

  <div *ngIf="!isLoading; else loadingTemplate">
    <!-- Stat Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <h4>Total Revenue</h4>
        <p>à¸¿{{ stats.totalRevenue | number:'1.2-2' }}</p>
      </div>
      <div class="stat-card">
        <h4>Total Sales</h4>
        <p>{{ stats.totalSales | number }} Units</p>
      </div>
      <div class="stat-card">
        <h4>Total Users</h4>
        <p>{{ stats.totalUsers | number }}</p>
      </div>
      <div class="stat-card">
        <h4>Games in Store</h4>
        <p>{{ stats.totalGames | number }}</p>
      </div>
    </div>

    <!-- Main Content Grid -->
    <div class="main-grid">
      <!-- Top Selling Games -->
      <div class="list-card">
        <h3>Top Selling Games</h3>
        <table>
          <tbody>
            <tr *ngFor="let game of topSellingGames">
              <td><img [src]="game.imageUrl" [alt]="game.name" class="game-thumb"></td>
              <td>{{ game.name }}</td>
              <td class="sales-count">{{ game.salesCount | number }} sales</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Recently Added & Actions -->
      <div class="side-grid">
        <div class="list-card">
          <h3>Recently Added</h3>
          <table>
            <tbody>
              <tr *ngFor="let game of recentlyAddedGames">
                <td><img [src]="game.imageUrl" [alt]="game.name" class="game-thumb"></td>
                <td>
                  <div class="game-name">{{ game.name }}</div>
                  <div class="game-date">{{ game.releaseDate?.toDate() | date:'shortDate' }}</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="actions-card">
          <h3>Quick Actions</h3>
          <a routerLink="/admin/manage-games" class="action-btn">Manage Games</a>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #loadingTemplate>
  <div class="loading-spinner"></div>
</ng-template>